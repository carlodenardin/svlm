```python
def count_triples(n):
    A = [int(i * i * (i + 1) // 2) for i in range(1, n + 1)]
    count = 0
    for i in range(n):
        for j in range(n):
            for k in range(n):
                if i != j and i != k and j != k:
                    if (i * j + j * k + k * i) % 3 == 0:
                        count += 1
    return count
```